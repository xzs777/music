
{"remainingRequest":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\Music.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\Music.vue","mtime":1604730516783},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSG9tZSBmcm9tICcuL2hvbWUvSG9tZS52dWUnDQppbXBvcnQgcmFua0xpc3QgZnJvbSAnLi9saXN0L1JhbmtpbmcudnVlJw0KaW1wb3J0IHNvbmdzUmFuayBmcm9tICcuL3NvbmdzL1JhbmsudnVlJw0KaW1wb3J0IE5ld011c2ljIGZyb20gJy4vbmV3bXVzaWMvTWFpbi52dWUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VhcmNoSG90czogW10sDQogICAgICBzZWFyY2hPcGVuY2xvc2U6IGZhbHNlLA0KICAgICAgc2VhcmNoVmFsdWU6ICcnLA0KICAgICAgaGlzdG9yeVRhZ3M6IFtdLA0KICAgICAgQ29tcG9uZW50czogJycsDQogICAgICBOZXdNdXNpY0NvbXBvbmVudHM6ICcnDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgJ20tcmFua2xpc3QnOiByYW5rTGlzdCwNCiAgICAnbS1ob21lJzogSG9tZQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VNYWluSW5kZXgnLCB0YWIubmFtZSkNCiAgICAgIGlmICh0YWIubmFtZSA9PT0gJ2ZvdXJ0aCcpIHsNCiAgICAgICAgdGhpcy5Db21wb25lbnRzID0gc29uZ3NSYW5rDQogICAgICB9IGVsc2UgaWYgKHRhYi5uYW1lLnRyaW0oKSA9PT0gJ2ZpZnRoJykgew0KICAgICAgICB0aGlzLk5ld011c2ljQ29tcG9uZW50cyA9IE5ld011c2ljDQogICAgICB9DQogICAgfSwNCiAgICAvLyDmkJzntKLlkJHlr7zmoYYNCiAgICBhc3luYyBzZWFyY2hHdWlkZShlbCkgew0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY29udHJvbE1zYy5zaG93TGlzdCA9IGZhbHNlDQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kcmVxdWVzdC5nZXQoJy9zZWFyY2gvaG90JykNCiAgICAgIHRoaXMuc2VhcmNoSG90cyA9IHJlcy5yZXN1bHQuaG90cw0KICAgICAgY29uc3QgaGlzdG9yeSA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZWFyY2hIaXN0b3J5JykNCiAgICAgIHZhciBhcnIgPSBoaXN0b3J5ID09PSBudWxsID8gW10gOiBKU09OLnBhcnNlKGhpc3RvcnkpDQogICAgICB0aGlzLmhpc3RvcnlUYWdzID0gYXJyDQogICAgICB0aGlzLnNlYXJjaE9wZW5jbG9zZSA9IHRydWUNCiAgICAgIGNvbnN0IGd1aWRlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ndWlkZScpDQogICAgICB3aW5kb3cub25jbGljayA9IGUgPT4gew0KICAgICAgICBpZiAoIWd1aWRlQm94LmNvbnRhaW5zKGUudGFyZ2V0KSAmJiAhZWwudGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgew0KICAgICAgICAgIHRoaXMuc2VhcmNoT3BlbmNsb3NlID0gZmFsc2UNCiAgICAgICAgICB3aW5kb3cub25jbGljayA9IG51bGwNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5pCc57Si54Ot6K+NDQogICAgaG90VGFnRXZlbnQoZSkgew0KICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IGUudGFyZ2V0LmlubmVyVGV4dC50cmltKCkNCiAgICAgIHRoaXMuc2VhcmNoRXZlbnQoKQ0KICAgIH0sDQogICAgLy8g5pCc57Si5LqL5Lu2DQogICAgc2VhcmNoRXZlbnQoKSB7DQogICAgICBpZiAodGhpcy5zZWFyY2hWYWx1ZS50cmltKCkubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfovpPlhaXmkJzntKLlhoXlrrnkuLrnqbrvvIEnKQ0KICAgICAgfQ0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3NlYXJjaFZhbHVlJywgdGhpcy5zZWFyY2hWYWx1ZSkNCiAgICAgIGNvbnN0IGhpc3RvcnkgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2VhcmNoSGlzdG9yeScpDQogICAgICB2YXIgYXJyID0gaGlzdG9yeSA9PT0gbnVsbCA/IFtdIDogSlNPTi5wYXJzZShoaXN0b3J5KQ0KICAgICAgaWYgKCFhcnIuaW5jbHVkZXModGhpcy5zZWFyY2hWYWx1ZS50cmltKCkpKSB7DQogICAgICAgIGlmIChhcnIubGVuZ3RoIDwgMTApIHsNCiAgICAgICAgICBhcnIudW5zaGlmdCh0aGlzLnNlYXJjaFZhbHVlLnRyaW0oKSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBhcnIuc3BsaWNlKDksIDEpDQogICAgICAgICAgYXJyLnVuc2hpZnQodGhpcy5zZWFyY2hWYWx1ZS50cmltKCkpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzZWFyY2hIaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkoYXJyKSkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCdzZWFyY2hsaXN0JykNCiAgICB9LA0KICAgIC8vIOWOhuWPsuaQnOe0og0KICAgIGhpc3RvcnlUYWdDbG9zZSh0YWcpIHsNCiAgICAgIHRoaXMuaGlzdG9yeVRhZ3Muc3BsaWNlKHRoaXMuaGlzdG9yeVRhZ3MuaW5kZXhPZih0YWcpLCAxKQ0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oDQogICAgICAgICdzZWFyY2hIaXN0b3J5JywNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5oaXN0b3J5VGFncykNCiAgICAgICkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgY29uc3QgbWFpbkluZGV4ID0gdGhpcy4kc3RvcmUuc3RhdGUubWFpbkluZGV4DQogICAgaWYgKG1haW5JbmRleCA9PT0gJ2ZvdXJ0aCcpIHsNCiAgICAgIHRoaXMuQ29tcG9uZW50cyA9IHNvbmdzUmFuaw0KICAgIH0gZWxzZSBpZiAobWFpbkluZGV4ID09PSAnZmlmdGgnKSB7DQogICAgICB0aGlzLk5ld011c2ljQ29tcG9uZW50cyA9IE5ld011c2ljDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Music.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Music.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-tabs v-model=\"$store.state.mainIndex\" @tab-click=\"handleClick\" class=\"le-tab-demo\">\r\n      <el-tab-pane label=\"个性推荐\" name=\"first\" class=\"applyScroll\">\r\n        <m-home></m-home>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"排行榜\" name=\"third\" class=\"applyScroll\">\r\n        <m-ranklist></m-ranklist>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"歌手\" name=\"fourth\" style=\"overflow: hidden!important\">\r\n        <div :is=\"Components\"></div>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"最新歌曲\" name=\"fifth\">\r\n        <div :is=\"NewMusicComponents\"></div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <!-- 搜索框 -->\r\n    <div class=\"search\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"input-search\"\r\n        @focus=\"searchGuide\"\r\n        v-model=\"searchValue\"\r\n        @keyup.enter=\"searchEvent\"\r\n      />\r\n      <i class=\"el-icon-search\" @click=\"searchEvent\"></i>\r\n    </div>\r\n    <!-- 搜索向导 -->\r\n    <div class=\"search-guide\" v-show=\"searchOpenclose\">\r\n      <div class=\"guide-box\">\r\n        <div class=\"guide-box-tt\">热门搜索</div>\r\n        <div class=\"hot-tags\">\r\n          <el-tag\r\n            effect=\"plain\"\r\n            type=\"info\"\r\n            v-for=\"(item, i) in searchHots\"\r\n            :key=\"i\"\r\n            @click=\"hotTagEvent\"\r\n          >{{item.first}}</el-tag>\r\n        </div>\r\n        <div class=\"guide-box-tt\">历史搜索</div>\r\n        <div class=\"hot-tags\">\r\n          <el-tag\r\n            effect=\"plain\"\r\n            type=\"info\"\r\n            v-for=\"(item, i) in historyTags\"\r\n            :key=\"i\"\r\n            @click=\"hotTagEvent\"\r\n            :closable=\"true\"\r\n            @close=\"historyTagClose(item)\"\r\n          >{{item}}</el-tag>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Home from './home/Home.vue'\r\nimport rankList from './list/Ranking.vue'\r\nimport songsRank from './songs/Rank.vue'\r\nimport NewMusic from './newmusic/Main.vue'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchHots: [],\r\n      searchOpenclose: false,\r\n      searchValue: '',\r\n      historyTags: [],\r\n      Components: '',\r\n      NewMusicComponents: ''\r\n    }\r\n  },\r\n  components: {\r\n    'm-ranklist': rankList,\r\n    'm-home': Home\r\n  },\r\n  methods: {\r\n    handleClick(tab, event) {\r\n      this.$store.commit('changeMainIndex', tab.name)\r\n      if (tab.name === 'fourth') {\r\n        this.Components = songsRank\r\n      } else if (tab.name.trim() === 'fifth') {\r\n        this.NewMusicComponents = NewMusic\r\n      }\r\n    },\r\n    // 搜索向导框\r\n    async searchGuide(el) {\r\n      this.$store.state.controlMsc.showList = false\r\n      const { data: res } = await this.$request.get('/search/hot')\r\n      this.searchHots = res.result.hots\r\n      const history = window.sessionStorage.getItem('searchHistory')\r\n      var arr = history === null ? [] : JSON.parse(history)\r\n      this.historyTags = arr\r\n      this.searchOpenclose = true\r\n      const guideBox = document.querySelector('.search-guide')\r\n      window.onclick = e => {\r\n        if (!guideBox.contains(e.target) && !el.target.contains(e.target)) {\r\n          this.searchOpenclose = false\r\n          window.onclick = null\r\n        }\r\n      }\r\n    },\r\n    // 搜索热词\r\n    hotTagEvent(e) {\r\n      this.searchValue = e.target.innerText.trim()\r\n      this.searchEvent()\r\n    },\r\n    // 搜索事件\r\n    searchEvent() {\r\n      if (this.searchValue.trim().length === 0) {\r\n        return this.$message.error('输入搜索内容为空！')\r\n      }\r\n      window.sessionStorage.setItem('searchValue', this.searchValue)\r\n      const history = window.sessionStorage.getItem('searchHistory')\r\n      var arr = history === null ? [] : JSON.parse(history)\r\n      if (!arr.includes(this.searchValue.trim())) {\r\n        if (arr.length < 10) {\r\n          arr.unshift(this.searchValue.trim())\r\n        } else {\r\n          arr.splice(9, 1)\r\n          arr.unshift(this.searchValue.trim())\r\n        }\r\n      }\r\n      window.sessionStorage.setItem('searchHistory', JSON.stringify(arr))\r\n      this.$router.push('searchlist')\r\n    },\r\n    // 历史搜索\r\n    historyTagClose(tag) {\r\n      this.historyTags.splice(this.historyTags.indexOf(tag), 1)\r\n      window.sessionStorage.setItem(\r\n        'searchHistory',\r\n        JSON.stringify(this.historyTags)\r\n      )\r\n    }\r\n  },\r\n  mounted() {\r\n    const mainIndex = this.$store.state.mainIndex\r\n    if (mainIndex === 'fourth') {\r\n      this.Components = songsRank\r\n    } else if (mainIndex === 'fifth') {\r\n      this.NewMusicComponents = NewMusic\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.applyScroll {\r\n  overflow: hidden scroll;\r\n  height: 480px;\r\n}\r\n.le-tab-demo {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: 0;\r\n  height: 600px;\r\n  overflow: hidden;\r\n}\r\n\r\n.el-tabs__header {\r\n  background: #f4f4f4;\r\n}\r\n.search {\r\n  position: absolute;\r\n  width: 200px;\r\n  right: 0;\r\n  top: 0;\r\n  height: 36px;\r\n  .el-icon-search {\r\n    font-size: 18px;\r\n    position: absolute;\r\n    right: 30px;\r\n    top: 10px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n.input-search {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 4px;\r\n  border-radius: 20px;\r\n  height: 26px;\r\n  border: 1px solid #f1f1f1;\r\n  outline: 0;\r\n  background: #ededed;\r\n  text-indent: 10px;\r\n}\r\n\r\n.el-tab-pane {\r\n  padding: 0 10px;\r\n}\r\n.search-guide {\r\n  height: 494px;\r\n  width: 340px;\r\n  background: #fff;\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 40px;\r\n  right: 0;\r\n  box-shadow: -6px 6px 6px rgba(0, 0, 0, 0.25);\r\n  .guide-box {\r\n    box-sizing: border-box;\r\n    padding: 8px 15px;\r\n  }\r\n  .guide-box-tt {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    font-size: 14px;\r\n    color: rgba(0, 0, 0, 0.6);\r\n  }\r\n  .hot-tags .el-tag {\r\n    border-radius: 15px;\r\n    padding: 0 12px;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    cursor: pointer;\r\n    margin-right: 10px;\r\n    margin-bottom: 8px;\r\n  }\r\n  .hot-tags .el-tag:hover {\r\n    background: #f1f1f1;\r\n  }\r\n}\r\n</style>\r\n"]}]}


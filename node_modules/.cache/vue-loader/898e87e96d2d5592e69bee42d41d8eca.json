{"remainingRequest":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\music\\Playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\music\\Playlist.vue","mtime":1593438612000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZIZWFkZXIgZnJvbSAnLi4vY29tbW9uL05hdmhlYWRlci52dWUnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlck1zZzogewogICAgICAgIHBpYzogJycsCiAgICAgICAgYXV0aG9yOiAnJywKICAgICAgICB0aW1lOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBkaXNjcmlwdGlvbjogJycsCiAgICAgICAgdGFnOiBbXQogICAgICB9LAogICAgICBzb25nc0xpc3Q6IFtdCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAnbmF2LWhlYWRlcic6IE5hdkhlYWRlcgogIH0sCiAgLy8g55uR5ZCsdnVleCDlvZPliY3mrYzljZVpZOaVsOaNruWPmOWMliDov5vooYzliJfooajliLfmlrAKICB3YXRjaDogewogICAgJyRzdG9yZS5zdGF0ZS50aGlzUGxheWxpc3RJZCc6IGZ1bmN0aW9uKG5ld0ZsYWcsIG9sZEZsYWcpIHsKICAgICAgaWYgKG5ld0ZsYWcgIT09IG9sZEZsYWcpIHsKICAgICAgICB0aGlzLmdldFBsYXlMaXN0KCkKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5q2M5Y2VCiAgICBhc3luYyBnZXRQbGF5TGlzdCgpIHsKICAgICAgY29uc3QgaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncGxheUxpc3RJZCcpCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRyZXF1ZXN0LmdldChgcGxheWxpc3QvZGV0YWlsP2lkPSR7aWR9YCkKICAgICAgLy8g6I635Y+W5Y+R5biD6ICF5L+h5oGv6YOo5YiGCiAgICAgIGNvbnN0IHVzZXJEYXRhID0gewogICAgICAgIHBpYzogcmVzLnBsYXlsaXN0LmNvdmVySW1nVXJsLAogICAgICAgIG5hbWU6IHJlcy5wbGF5bGlzdC5uYW1lLAogICAgICAgIGRpc2NyaXB0aW9uOiByZXMucGxheWxpc3QuZGVzY3JpcHRpb24sCiAgICAgICAgdGFnOiByZXMucGxheWxpc3QudGFncywKICAgICAgICBhdXRob3I6IHJlcy5wbGF5bGlzdC5jcmVhdG9yLm5pY2tuYW1lLAogICAgICAgIHRpbWU6IHJlcy5wbGF5bGlzdC51cGRhdGVUaW1lCiAgICAgIH0KICAgICAgdGhpcy51c2VyTXNnID0gdXNlckRhdGEKICAgICAgY29uc3QgYXJyRGF0YSA9IFtdCiAgICAgIC8vIOiOt+WPluatjOabsumDqOWIhgogICAgICByZXMucGxheWxpc3QudHJhY2tzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgY29uc3QgYXJyID0ge30KICAgICAgICBhcnIubmFtZSA9IGl0ZW0ubmFtZQogICAgICAgIGFyci5hdXRob3IgPSBbXQogICAgICAgIGl0ZW0uYXIuZm9yRWFjaChpID0+IHsKICAgICAgICAgIGFyci5hdXRob3IucHVzaChpLm5hbWUpCiAgICAgICAgfSkKICAgICAgICBhcnIuaWQgPSBpdGVtLmlkCiAgICAgICAgYXJyLmFsYnVtID0gaXRlbS5hbC5uYW1lCiAgICAgICAgYXJyLnBpYyA9IGl0ZW0uYWwucGljVXJsCiAgICAgICAgYXJyLnRpbWUgPQogICAgICAgICAgTWF0aC5mbG9vcigoaXRlbS5kdCAlIDM2MDAwMDApIC8gNjAwMDApID4gMTAKICAgICAgICAgICAgPyBNYXRoLmZsb29yKChpdGVtLmR0ICUgMzYwMDAwMCkgLyA2MDAwMCkKICAgICAgICAgICAgOiAnMCcgKyBNYXRoLmZsb29yKChpdGVtLmR0ICUgMzYwMDAwMCkgLyA2MDAwMCkKICAgICAgICBhcnIudGltZSArPQogICAgICAgICAgJzonICsKICAgICAgICAgIChNYXRoLmZsb29yKChpdGVtLmR0ICUgNjAwMDApIC8gMTAwMCkgPiAxMAogICAgICAgICAgICA/IE1hdGguZmxvb3IoKGl0ZW0uZHQgJSA2MDAwMCkgLyAxMDAwKQogICAgICAgICAgICA6ICcwJyArIE1hdGguZmxvb3IoKGl0ZW0uZHQgJSA2MDAwMCkgLyAxMDAwKSkKICAgICAgICBhcnJEYXRhLnB1c2goYXJyKQogICAgICB9KQogICAgICB0aGlzLnNvbmdzTGlzdCA9IGFyckRhdGEKICAgIH0sCiAgICAvLyDojrflj5bmrYzmm7LlnLDlnYAKICAgIGFzeW5jIGdldE11c2ljVXJsKG9iaikgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kcmVxdWVzdC5nZXQoYC9zb25nL3VybD9pZD0ke29iai5pZH1gKQogICAgICBsZXQgbXVzaWMgPSB7fQogICAgICBtdXNpYyA9IHsKICAgICAgICB0aXRsZTogb2JqLm5hbWUsCiAgICAgICAgYXJ0aXN0OiBvYmouYXV0aG9yLmpvaW4oJyAnKSwKICAgICAgICBzcmM6IHJlcy5kYXRhWzBdLnVybCwKICAgICAgICBwaWM6IG9iai5waWMsCiAgICAgICAgaWQ6IG9iai5pZAogICAgICB9CiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdub3dNdXNpYycsIEpTT04uc3RyaW5naWZ5KG11c2ljKSkKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RlYWxBdXRvUGxheScsIG11c2ljKQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UGxheUxpc3QoKQogIH0KfQo="},{"version":3,"sources":["Playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Playlist.vue","sourceRoot":"src/components/music","sourcesContent":["<template>\n  <div>\n    <nav-header></nav-header>\n    <div class=\"main-nav\">\n      <div class=\"main-nav-tt\">\n        <img :src=\"userMsg.pic\" alt />\n        <div class=\"main-nav-text\">\n          <div class=\"main-tt-name\">\n            <span>歌单</span>\n            {{userMsg.name}}\n          </div>\n          <div class=\"main-tt-label\">\n            <span style=\"color:#416bc8\">{{userMsg.author}}</span>\n            &nbsp;&nbsp;&nbsp;{{userMsg.time| dataFormat}}\n          </div>\n          <div class=\"main-tt-label\">\n            标签:\n            <span v-for=\"(item,i) in userMsg.tag\" :key=\"i\">{{item + \" \"}}</span>\n          </div>\n          <div class=\"main-tt-label\">描述: {{userMsg.discription}}</div>\n          <div class=\"main-tt-btn\">\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-video-play\"\n              @click=\"playMusicAtonce(songsList)\"\n            >立即播放</el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"main-song-list\">\n        <el-table :data=\"songsList\" style=\"width: 100%\" :stripe=\"true\" @row-click=\"getMusicUrl\">\n          <el-table-column type=\"index\" width=\"60px\"></el-table-column>\n          <el-table-column prop=\"name\" label=\"音乐标题\"></el-table-column>\n          <el-table-column prop=\"author\" label=\"歌手\" width=\"180\">\n            <template slot-scope=\"scope\">\n              <span v-for=\"(item,i) in scope.row.author\" :key=\"i\">{{item + ' '}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"album\" label=\"专辑\" width=\"180\"></el-table-column>\n          <el-table-column prop=\"time\" label=\"时长\" width=\"100\"></el-table-column>\n        </el-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavHeader from '../common/Navheader.vue'\nexport default {\n  data() {\n    return {\n      userMsg: {\n        pic: '',\n        author: '',\n        time: '',\n        name: '',\n        discription: '',\n        tag: []\n      },\n      songsList: []\n    }\n  },\n  components: {\n    'nav-header': NavHeader\n  },\n  // 监听vuex 当前歌单id数据变化 进行列表刷新\n  watch: {\n    '$store.state.thisPlaylistId': function(newFlag, oldFlag) {\n      if (newFlag !== oldFlag) {\n        this.getPlayList()\n      }\n    }\n  },\n  methods: {\n    // 获取歌单\n    async getPlayList() {\n      const id = window.sessionStorage.getItem('playListId')\n      const { data: res } = await this.$request.get(`playlist/detail?id=${id}`)\n      // 获取发布者信息部分\n      const userData = {\n        pic: res.playlist.coverImgUrl,\n        name: res.playlist.name,\n        discription: res.playlist.description,\n        tag: res.playlist.tags,\n        author: res.playlist.creator.nickname,\n        time: res.playlist.updateTime\n      }\n      this.userMsg = userData\n      const arrData = []\n      // 获取歌曲部分\n      res.playlist.tracks.forEach(item => {\n        const arr = {}\n        arr.name = item.name\n        arr.author = []\n        item.ar.forEach(i => {\n          arr.author.push(i.name)\n        })\n        arr.id = item.id\n        arr.album = item.al.name\n        arr.pic = item.al.picUrl\n        arr.time =\n          Math.floor((item.dt % 3600000) / 60000) > 10\n            ? Math.floor((item.dt % 3600000) / 60000)\n            : '0' + Math.floor((item.dt % 3600000) / 60000)\n        arr.time +=\n          ':' +\n          (Math.floor((item.dt % 60000) / 1000) > 10\n            ? Math.floor((item.dt % 60000) / 1000)\n            : '0' + Math.floor((item.dt % 60000) / 1000))\n        arrData.push(arr)\n      })\n      this.songsList = arrData\n    },\n    // 获取歌曲地址\n    async getMusicUrl(obj) {\n      const { data: res } = await this.$request.get(`/song/url?id=${obj.id}`)\n      let music = {}\n      music = {\n        title: obj.name,\n        artist: obj.author.join(' '),\n        src: res.data[0].url,\n        pic: obj.pic,\n        id: obj.id\n      }\n      window.sessionStorage.setItem('nowMusic', JSON.stringify(music))\n      this.$store.dispatch('dealAutoPlay', music)\n    }\n  },\n  created() {\n    this.getPlayList()\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.main-nav .main-nav-tt img {\n  width: 130px !important;\n  height: 130px !important;\n}\n.main-nav .main-tt-name {\n  display: flex;\n  align-items: center;\n}\n.main-nav .main-tt-name span {\n  border: 2px solid red;\n  font-weight: 600;\n  margin-right: 10px;\n  border-radius: 4px;\n  color: red;\n  padding: 0px 10px;\n  font-size: 12px;\n  display: inline-block;\n  height: 18px;\n  line-height: 18px;\n}\n.main-nav .main-nav-tt .main-tt-label {\n  height: 20px;\n  line-height: 20px;\n  color: rgba(0, 0, 0, 0.6);\n  font-weight: 600;\n  max-width: 300px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.main-nav .main-nav-tt .main-tt-btn {\n  margin-top: 10px;\n}\n</style>\n"]}]}
{"remainingRequest":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\src\\components\\common\\Navheader.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\src\\components\\common\\Navheader.vue","mtime":1605024328822},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605024328000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1605024328000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605024328000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\music-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1605024328000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcmV0dXJuTGluazogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcvbXVzaWMnLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hWYWx1ZTogJycsCiAgICAgIHNlYXJjaE9wZW5jbG9zZTogZmFsc2UsCiAgICAgIHNlYXJjaEhvdHM6IFtdLAogICAgICBoaXN0b3J5VGFnczogW10KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaEV2ZW50KCkgewogICAgICBpZiAodGhpcy5zZWFyY2hWYWx1ZS50cmltKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+i+k+WFpeaQnOe0ouWGheWuueS4uuepuu+8gScpCiAgICAgIH0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3NlYXJjaFZhbHVlJywgdGhpcy5zZWFyY2hWYWx1ZS50cmltKCkpCiAgICAgIGNvbnN0IGhpc3RvcnkgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2VhcmNoSGlzdG9yeScpCiAgICAgIHZhciBhcnIgPSBoaXN0b3J5ID09PSBudWxsID8gW10gOiBKU09OLnBhcnNlKGhpc3RvcnkpCiAgICAgIGlmICghYXJyLmluY2x1ZGVzKHRoaXMuc2VhcmNoVmFsdWUudHJpbSgpKSkgewogICAgICAgIGlmIChhcnIubGVuZ3RoIDwgMTApIHsKICAgICAgICAgIGFyci51bnNoaWZ0KHRoaXMuc2VhcmNoVmFsdWUudHJpbSgpKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhcnIuc3BsaWNlKDksIDEpCiAgICAgICAgICBhcnIudW5zaGlmdCh0aGlzLnNlYXJjaFZhbHVlLnRyaW0oKSkKICAgICAgICB9CiAgICAgIH0KICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3NlYXJjaEhpc3RvcnknLCBKU09OLnN0cmluZ2lmeShhcnIpKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnc2VhcmNobGlzdCcpCiAgICB9LAogICAgYXN5bmMgc2VhcmNoR3VpZGUoZWwpIHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY29udHJvbE1zYy5zaG93TGlzdCA9IGZhbHNlCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRyZXF1ZXN0LmdldCgnL3NlYXJjaC9ob3QnKQogICAgICB0aGlzLnNlYXJjaEhvdHMgPSByZXMucmVzdWx0LmhvdHMKICAgICAgY29uc3QgaGlzdG9yeSA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZWFyY2hIaXN0b3J5JykKICAgICAgdmFyIGFyciA9IGhpc3RvcnkgPT09IG51bGwgPyBbXSA6IEpTT04ucGFyc2UoaGlzdG9yeSkKICAgICAgdGhpcy5oaXN0b3J5VGFncyA9IGFycgogICAgICB0aGlzLnNlYXJjaE9wZW5jbG9zZSA9IHRydWUKICAgICAgY29uc3QgZ3VpZGVCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWd1aWRlJykKICAgICAgd2luZG93Lm9uY2xpY2sgPSBlID0+IHsKICAgICAgICBpZiAoIWd1aWRlQm94LmNvbnRhaW5zKGUudGFyZ2V0KSAmJiAhZWwudGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgewogICAgICAgICAgdGhpcy5zZWFyY2hPcGVuY2xvc2UgPSBmYWxzZQogICAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBudWxsCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaG90VGFnRXZlbnQoZSkgewogICAgICB0aGlzLnNlYXJjaFZhbHVlID0gZS50YXJnZXQuaW5uZXJUZXh0LnRyaW0oKQogICAgICB0aGlzLnNlYXJjaEV2ZW50KCkKICAgIH0sCiAgICBoaXN0b3J5VGFnQ2xvc2UodGFnKSB7CiAgICAgIHRoaXMuaGlzdG9yeVRhZ3Muc3BsaWNlKHRoaXMuaGlzdG9yeVRhZ3MuaW5kZXhPZih0YWcpLCAxKQogICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgKICAgICAgICAnc2VhcmNoSGlzdG9yeScsCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5oaXN0b3J5VGFncykKICAgICAgKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Navheader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Navheader.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"main-header\">\r\n      <i class=\"el-icon-arrow-left\" @click=\"$router.push(returnLink)\"></i>\r\n      <slot></slot>\r\n      <div class=\"search\">\r\n        <input type=\"text\" class=\"input-search\" v-model=\"searchValue\" @keyup.enter=\"searchEvent\" @focus=\"searchGuide\" />\r\n        <i class=\"el-icon-search\" @click=\"searchEvent\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"search-guide\" v-show=\"searchOpenclose\">\r\n      <div class=\"guide-box\">\r\n        <!-- <div class=\"guide-box-tt\">热门搜索</div>\r\n        <div class=\"hot-tags\">\r\n          <el-tag effect=\"plain\" type=\"info\" v-for=\"(item, i) in searchHots\" :key=\"i\" @click=\"hotTagEvent\">\r\n            {{item.first}}</el-tag>\r\n        </div> -->\r\n        <div class=\"guide-box-tt\">历史搜索</div>\r\n        <div class=\"hot-tags\">\r\n          <el-tag effect=\"plain\" type=\"info\" v-for=\"(item, i) in historyTags\" :key=\"i\" @click=\"hotTagEvent\"\r\n            :closable=\"true\" @close=\"historyTagClose(item)\">{{item}}</el-tag>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      returnLink: {\r\n        type: String,\r\n        default: '/music',\r\n        required: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        searchValue: '',\r\n        searchOpenclose: false,\r\n        searchHots: [],\r\n        historyTags: []\r\n      }\r\n    },\r\n    methods: {\r\n      searchEvent() {\r\n        if (this.searchValue.trim().length === 0) {\r\n          return this.$message.error('输入搜索内容为空！')\r\n        }\r\n        window.sessionStorage.setItem('searchValue', this.searchValue.trim())\r\n        const history = window.sessionStorage.getItem('searchHistory')\r\n        var arr = history === null ? [] : JSON.parse(history)\r\n        if (!arr.includes(this.searchValue.trim())) {\r\n          if (arr.length < 10) {\r\n            arr.unshift(this.searchValue.trim())\r\n          } else {\r\n            arr.splice(9, 1)\r\n            arr.unshift(this.searchValue.trim())\r\n          }\r\n        }\r\n        window.sessionStorage.setItem('searchHistory', JSON.stringify(arr))\r\n        this.$router.push('searchlist')\r\n      },\r\n      async searchGuide(el) {\r\n        this.$store.state.controlMsc.showList = false\r\n        const { data: res } = await this.$request.get('/search/hot')\r\n        this.searchHots = res.result.hots\r\n        const history = window.sessionStorage.getItem('searchHistory')\r\n        var arr = history === null ? [] : JSON.parse(history)\r\n        this.historyTags = arr\r\n        this.searchOpenclose = true\r\n        const guideBox = document.querySelector('.search-guide')\r\n        window.onclick = e => {\r\n          if (!guideBox.contains(e.target) && !el.target.contains(e.target)) {\r\n            this.searchOpenclose = false\r\n            window.onclick = null\r\n          }\r\n        }\r\n      },\r\n      hotTagEvent(e) {\r\n        this.searchValue = e.target.innerText.trim()\r\n        this.searchEvent()\r\n      },\r\n      historyTagClose(tag) {\r\n        this.historyTags.splice(this.historyTags.indexOf(tag), 1)\r\n        window.sessionStorage.setItem(\r\n          'searchHistory',\r\n          JSON.stringify(this.historyTags)\r\n        )\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  .search-guide {\r\n    height: 494px;\r\n    width: 340px;\r\n    background: #fff;\r\n    position: absolute;\r\n    z-index: 999;\r\n    top: 40px;\r\n    right: 0;\r\n    box-shadow: -6px 6px 6px rgba(0, 0, 0, 0.25);\r\n  }\r\n\r\n  .guide-box {\r\n    box-sizing: border-box;\r\n    padding: 8px 15px;\r\n  }\r\n\r\n  .guide-box-tt {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    font-size: 14px;\r\n    color: rgba(0, 0, 0, 0.6);\r\n  }\r\n\r\n  .hot-tags .el-tag {\r\n    border-radius: 15px;\r\n    padding: 0 12px;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    cursor: pointer;\r\n    margin-right: 10px;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .hot-tags .el-tag:hover {\r\n    background: #f1f1f1;\r\n  }\r\n</style>"]}]}
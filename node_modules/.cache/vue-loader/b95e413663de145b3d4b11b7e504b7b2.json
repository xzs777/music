{"remainingRequest":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\newmusic\\Newmusic.vue?vue&type=style&index=0&id=0db03b8f&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\src\\components\\newmusic\\Newmusic.vue","mtime":1593438612000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\74031\\Desktop\\新建文件夹 (4)\\vue_music-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubXVzaWMtaW1nLXRpdGxlIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICBvdmVyZmxvdzogaGlkZGVuOwogIC5lbC1pbWFnZSB7CiAgICB3aWR0aDogNTBweDsKICAgIGhlaWdodDogNTBweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIG1hcmdpbi1yaWdodDogMTBweDsKICB9CiAgc3BhbiB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB3aWR0aDogMTgwcHg7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogIH0KfQoubmV3LWxpc3QgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IDQwcHg7CiAgbGluZS1oZWlnaHQ6IDQwcHg7CiAgLm5ldy1oZWFkZXItbGlzdCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICAgIC5zZWxlY3QgewogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBjb2xvcjogIzAwMDsKICAgIH0KICAgIGxpIHsKICAgICAgZmxvYXQ6IGxlZnQ7CiAgICAgIG1hcmdpbi1yaWdodDogMTVweDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjYpOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CiAgICBsaTpob3ZlciB7CiAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOSk7CiAgICB9CiAgfQogIC5lbC1idXR0b24gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDIwcHg7CiAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgdG9wOiA1cHg7CiAgfQp9Cg=="},{"version":3,"sources":["Newmusic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Newmusic.vue","sourceRoot":"src/components/newmusic","sourcesContent":["<template>\n  <div>\n    <div class=\"new-list\">\n      <ul class=\"new-header-list\">\n        <li\n          v-for=\"(item,i) in typeList\"\n          :key=\"i\"\n          :class=\"listIndex === i ? 'select' : ''\"\n          @click=\"listchange(i)\"\n        >{{item.name}}</li>\n      </ul>\n      <el-button type=\"danger\" size=\"mini\" @click=\"playMusicAtonce(musiclist)\">立即播放</el-button>\n    </div>\n    <div\n      class=\"main-song-list\"\n      style=\"height:360px;overflow:hidden scroll;width:790px\"\n      @scroll=\"listenScroll\"\n    >\n      <el-table\n        :data=\"musiclist\"\n        style=\"width: 100%;\"\n        :stripe=\"true\"\n        @row-click=\"getMusicUrl\"\n        :show-header=\"false\"\n      >\n        <el-table-column type=\"index\" width=\"60px\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"音乐标题\">\n          <template slot-scope=\"scoped\">\n            <div class=\"music-img-title\">\n              <el-image :src=\"scoped.row.pic\">\n                <div slot=\"placeholder\" class=\"image-slot\">\n                  <i class=\"el-icon-picture\" style=\"font-size:50px;color:#f1f1f1\"></i>\n                </div>\n              </el-image>\n              <span>{{scoped.row.name}}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"author\" label=\"歌手\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <span v-for=\"(item,i) in scope.row.author\" :key=\"i\">{{item + ' '}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"album\" label=\"专辑\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"time\" label=\"时长\" width=\"100\"></el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      listIndex: 0,\n      typeList: [\n        { name: '全部', type: 0 },\n        { name: '华语', type: 7 },\n        { name: '欧美', type: 96 },\n        { name: '日本', type: 8 },\n        { name: '韩国', type: 16 }\n      ],\n      musiclist: [],\n      musicdata: [],\n      queryNum: 10,\n      scrollStatus: false\n    }\n  },\n  methods: {\n    listchange(item) {\n      this.listIndex = item\n      this.getMusicList(this.typeList[item].type)\n      document.querySelector('.main-song-list').scrollTo(0, 0)\n    },\n    async getMusicList() {\n      const type = arguments[0] === undefined ? 0 : arguments[0]\n      const { data: res } = await this.$request.get(`/top/song?type=${type}`)\n      const arrData = []\n      res.data.forEach(item => {\n        const arr = {}\n        arr.name = item.name\n        arr.pic = item.album.picUrl\n        arr.author = []\n        item.artists.forEach(i => {\n          arr.author.push(i.name)\n        })\n        arr.id = item.id\n        arr.time =\n          Math.floor((item.duration % 3600000) / 60000) > 10\n            ? Math.floor((item.duration % 3600000) / 60000)\n            : '0' + Math.floor((item.duration % 3600000) / 60000)\n        arr.time +=\n          ':' +\n          (Math.floor((item.duration % 60000) / 1000) > 10\n            ? Math.floor((item.duration % 60000) / 1000)\n            : '0' + Math.floor((item.duration % 60000) / 1000))\n        arr.album = item.album.name\n        arrData.push(arr)\n      })\n      this.musicdata = arrData\n      this.musiclist = this.getArrayData(arrData, 1, 10)\n    },\n    // 获取音乐播放地址\n    async getMusicUrl(obj) {\n      const { data: res } = await this.$request.get(`/song/url?id=${obj.id}`)\n      let music = {}\n      music = {\n        title: obj.name,\n        artist: obj.author.join(' '),\n        src: res.data[0].url,\n        pic: obj.pic,\n        id: obj.id\n      }\n      window.sessionStorage.setItem('nowMusic', JSON.stringify(music))\n      this.$store.dispatch('dealAutoPlay', music)\n    },\n    // 数组提取部分数据\n    getArrayData(data, start, num) {\n      const res = []\n      const length =\n        start + num - 1 > data.length ? data.length : start + num - 1\n      for (var i = start - 1; i < length; i++) {\n        res.push(data[i])\n      }\n      return res\n    },\n    listenScroll(e) {\n      const scroll = (\n        e.target.scrollTop /\n        (e.target.scrollHeight - e.target.clientHeight)\n      ).toFixed(3)\n      if (scroll > 0.95 && !this.scrollStatus) {\n        this.scrollStatus = true\n        setTimeout(() => {\n          if (this.queryNum < 100) {\n            this.queryNum += 10\n            this.musiclist = this.getArrayData(this.musicdata, 1, this.queryNum)\n            setTimeout(() => {\n              e.target.scrollTo(0, (this.queryNum - 10) * 75 - e.target.clientHeight)\n              this.scrollStatus = false\n            }, 10)\n          }\n        }, 1500)\n      }\n    }\n  },\n  created() {\n    this.getMusicList()\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.music-img-title {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  .el-image {\n    width: 50px;\n    height: 50px;\n    border-radius: 4px;\n    margin-right: 10px;\n  }\n  span {\n    display: inline-block;\n    width: 180px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n}\n.new-list {\n  position: relative;\n  height: 40px;\n  line-height: 40px;\n  .new-header-list {\n    display: block;\n    list-style-type: none;\n    .select {\n      font-weight: 600;\n      color: #000;\n    }\n    li {\n      float: left;\n      margin-right: 15px;\n      font-size: 14px;\n      color: rgba(0, 0, 0, 0.6);\n      cursor: pointer;\n    }\n    li:hover {\n      color: rgba(0, 0, 0, 0.9);\n    }\n  }\n  .el-button {\n    position: absolute;\n    right: 20px;\n    border-radius: 20px;\n    top: 5px;\n  }\n}\n</style>\n"]}]}